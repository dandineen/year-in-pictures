@import url(//fonts.googleapis.com/css?family=Oldenburg|Permanent+Marker|Ribeye+Marrow);

@mixin spacing {
  @media #{$small-only} {
    // TODO
  }
  @media #{$medium-up} {
    padding: 0 rem-calc(100);
  }
}

@mixin nav-link-hover {
  text-decoration: underline;
  background-color: $topbar-link-bg-hover;
}

@mixin polaroid-position($rot, $transX, $transY) {
  @media #{$large-up} {
    position: relative;
    top: $transY;
    left: $transY;
    a {
      transform: rotate($rot);
      -webkit-transform: rotate($rot);
      -ms-transform:rotate($rot);
      -o-transform:rotate($rot);
    }
  }
}

section.right a.right-off-canvas-toggle { margin-right: rem-calc(20); }

.row {

  h1 {
    @include spacing;
    margin: rem-calc(25) 0;
  }

  nav {
    @include spacing;
    .month-navigation ul li a {
      @media only screen and (max-width: 1140px) {
        font-size: rem-calc(16);
      }
      @media only screen and (min-width: 620px) and (max-width: 990px) {
        font-size: rem-calc(12);
      }
      &:hover {
        text-decoration: underline;
      }
    }
  }

  &.month, &.picture {
    background: url("/images/natural_paper.png") repeat scroll 0 0 #C2C2A3;
    margin-bottom: rem-calc(10);
    box-shadow: 0 10px 5px -5px #222;

    &.future {
      opacity: 0.5;
    }

    h2 {
      @include spacing;
      border-bottom: solid 1px #9a3521;
    }

    div.images {
      @include spacing;

      ul.polaroids li {

        // make a pile of polaroids
        &:nth-child(1) {
          @include polaroid-position(-7deg, 70px, 0);
        }
        &:nth-child(2) {
          @include polaroid-position(2deg, 0, 0);
        }
        &:nth-child(3) {
          @include polaroid-position(-22deg, -105px, 32px);
          z-index: 2;
        }
        &:nth-child(4) {
          @include polaroid-position(10deg, 100px, -50px);
        }
        &:nth-child(5) {
          @include polaroid-position(-21deg, 0, -40px);
          z-index: 2;
        }
        &:nth-child(6) {
          @include polaroid-position(22deg, -70px, 25px);
        }
        &:nth-child(7) {
          @include polaroid-position(-11deg, 100px, -50px);
          z-index: 2;
        }
        &:nth-child(8) {
          @include polaroid-position(5deg, -25px, -40px);
        }
        &:nth-child(9) {
          @include polaroid-position(33deg, -125px, 30px);
          z-index: 2;
        }
        &:nth-child(10) {
          @include polaroid-position(-34deg, 80px, -60px);
        }
        &:nth-child(11) {
          @include polaroid-position(-16deg, -40px, -70px);
          z-index: 2;
        }
        &:nth-child(12) {
          @include polaroid-position(20deg, -170px, -10px);
        }
        &:nth-child(13) {
          @include polaroid-position(-5deg, 90px, -160px);
        }
        &:nth-child(14) {
          @include polaroid-position(17deg, -20px, -80px);
          z-index: 2;
        }
        &:nth-child(15) {
          @include polaroid-position(-5deg, -50px, -60px);
        }
        &:nth-child(16) {
          @include polaroid-position(10deg, 100px, -200px);
        }
        &:nth-child(17) {
          @include polaroid-position(-5deg, -40px, -50px);
        }
        &:nth-child(18) {
          @include polaroid-position(25deg, -100px, -60px);
        }
        &:nth-child(19) {
          @include polaroid-position(-15deg, 50px, -200px);
        }
        &:nth-child(20) a {
          @include polaroid-position(10deg, -100px, -120px);
        }
        &:nth-child(21) a {
          @include polaroid-position(2deg, -220px, -130px);
        }

        // style the pics
        a:after {
          content: attr(title);
        }
        a {
          background: #fff;
          margin: 0 0 27px 30px;
          width: 210px;
          padding: 10px 10px 15px;
          display: inline;
          float: left;
          text-align: center;
          font-family: join("Permanent Marker", $body-font-family);
          text-decoration: none;
          color: #333;
          font-size: 18px;
          box-shadow: 0 3px 6px rgba(0,0,0,.25);
          transition-property: transform;
          transition-duration: 0.3s, 0.3s;
          -webkit-transition-property: -webkit-transform;
          -webkit-transition-duration: 0.3s, 0.3s;

          img {
            display: block;
            width: 190px;
            margin-bottom: 12px;
          }

          &:hover {
            transform: scale(1.25, 1.25);
            -ms-transform: scale(1.25, 1.25);
            -moz-transform: scale(1.25, 1.25);
            -webkit-transform: scale(1.25, 1.25);
            -o-transform: scale(1.25, 1.25);
            position: relative;
            z-index: 5;
          }
        }
      } // ul.polaroids li
    } // div.images

    // full page image
    .date {
      @include spacing;

      a {
        padding: 10px 15px;
        &:hover {
          @include nav-link-hover;
        }
      }
    }
    figure {
      @include spacing;

      figcaption a {
        color: $secondary-color;
        &:hover {
          text-decoration: underline;
        }
      }
    }
    nav ul li a {
      padding: rem-calc(10);
      &:hover {
        @include nav-link-hover;
      }
    }
  } // &.month, &.picture
} // .row

footer {
  @include spacing;
}
